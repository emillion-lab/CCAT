<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ö–∞—Ç–µ–≥–æ—Ä–∏—è –° - Smart Learning -Beta </title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }

body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
  color: #e4e4e4;
  min-height: 100vh;
  padding: 20px;
}

.container { max-width: 1400px; margin: 0 auto; }

.header {
  text-align: center;
  padding: 30px 20px;
  background: rgba(255,255,255,0.05);
  border-radius: 20px;
  margin-bottom: 30px;
  backdrop-filter: blur(10px);
}

.header h1 {
  font-size: 2.5em;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 10px;
}

.tabs {
  display: flex;
  gap: 10px;
  margin-bottom: 30px;
  flex-wrap: wrap;
}

.tab {
  padding: 15px 30px;
  border: none;
  border-radius: 12px;
  background: rgba(255,255,255,0.1);
  color: #e4e4e4;
  cursor: pointer;
  transition: all 0.3s;
  font-size: 1em;
  font-weight: bold;
}

.tab:hover {
  background: rgba(255,255,255,0.15);
  transform: translateY(-2px);
}

.tab.active {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.tab-content {
  display: none;
}

.tab-content.active {
  display: block;
  animation: fadeIn 0.5s;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
  margin-bottom: 30px;
}

.stat-card {
  background: rgba(255,255,255,0.05);
  padding: 20px;
  border-radius: 15px;
  text-align: center;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.1);
}

.stat-card h3 {
  font-size: 0.9em;
  color: #a0a0a0;
  margin-bottom: 10px;
}

.stat-card .number {
  font-size: 2em;
  font-weight: bold;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.cheat-sheet {
  background: rgba(255,255,255,0.05);
  padding: 30px;
  border-radius: 20px;
  margin-bottom: 20px;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.1);
}

.cheat-sheet h2 {
  color: #667eea;
  margin-bottom: 20px;
  font-size: 1.5em;
}

.cheat-table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 15px;
}

.cheat-table th,
.cheat-table td {
  padding: 15px;
  text-align: left;
  border-bottom: 1px solid rgba(255,255,255,0.1);
}

.cheat-table th {
  background: rgba(102, 126, 234, 0.2);
  color: #667eea;
  font-weight: bold;
}

.cheat-table td {
  background: rgba(255,255,255,0.02);
}

.mnemonic-box {
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
  padding: 15px 20px;
  border-radius: 10px;
  margin: 10px 0;
  border-left: 4px solid #667eea;
  font-style: italic;
}

.filters {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 30px;
}

.filter-btn {
  padding: 12px 24px;
  border: none;
  border-radius: 10px;
  background: rgba(255,255,255,0.1);
  color: #e4e4e4;
  cursor: pointer;
  transition: all 0.3s;
  font-size: 1em;
}

.filter-btn:hover {
  background: rgba(255,255,255,0.15);
  transform: translateY(-2px);
}

.filter-btn.active {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}

.question-card {
  background: rgba(255,255,255,0.05);
  padding: 30px;
  border-radius: 20px;
  margin-bottom: 20px;
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.1);
  animation: fadeIn 0.5s;
}

.question-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 20px;
}

.question-type {
  display: inline-block;
  padding: 6px 12px;
  border-radius: 6px;
  font-size: 0.85em;
  font-weight: bold;
}

.type-LOGIC { background: #10b981; color: white; }
.type-NUMBERS { background: #f59e0b; color: white; }
.type-RULES { background: #3b82f6; color: white; }
.type-SIGNS { background: #8b5cf6; color: white; }
.type-DOCUMENTS { background: #ec4899; color: white; }

.question-text {
  font-size: 1.3em;
  margin-bottom: 20px;
  line-height: 1.6;
}

.answers {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-bottom: 20px;
}

.answer-btn {
  padding: 15px 20px;
  border: 2px solid rgba(255,255,255,0.2);
  border-radius: 12px;
  background: rgba(255,255,255,0.05);
  color: #e4e4e4;
  cursor: pointer;
  transition: all 0.3s;
  text-align: left;
  font-size: 1em;
}

.answer-btn:hover:not(:disabled) {
  background: rgba(255,255,255,0.1);
  border-color: rgba(255,255,255,0.3);
  transform: translateX(5px);
}

.answer-btn.correct {
  background: rgba(16, 185, 129, 0.2);
  border-color: #10b981;
  color: #10b981;
}

.answer-btn.wrong {
  background: rgba(239, 68, 68, 0.2);
  border-color: #ef4444;
  color: #ef4444;
}

.answer-btn:disabled {
  cursor: not-allowed;
}

.mnemonic {
  background: linear-gradient(135deg, rgba(102, 126, 234, 0.2), rgba(118, 75, 162, 0.2));
  padding: 20px;
  border-radius: 12px;
  margin-top: 20px;
  border-left: 4px solid #667eea;
  display: none;
}

.mnemonic.show {
  display: block;
  animation: fadeIn 0.5s;
}

.mnemonic-title {
  font-weight: bold;
  margin-bottom: 10px;
  color: #667eea;
  font-size: 1.1em;
}

.navigation {
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
  gap: 15px;
}

.nav-btn {
  padding: 15px 30px;
  border: none;
  border-radius: 12px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  cursor: pointer;
  font-size: 1em;
  font-weight: bold;
  transition: all 0.3s;
}

.nav-btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
}

.nav-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.progress-bar {
  height: 8px;
  background: rgba(255,255,255,0.1);
  border-radius: 10px;
  overflow: hidden;
  margin-bottom: 30px;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
  transition: width 0.3s;
  border-radius: 10px;
}

.topic-header {
  background: rgba(102, 126, 234, 0.15);
  padding: 15px 20px;
  border-radius: 10px;
  margin-bottom: 15px;
  border-left: 4px solid #667eea;
  font-weight: bold;
}

.sign-image {
  max-width: 200px;
  height: auto;
  margin: 20px auto;
  display: block;
  background: white;
  padding: 20px;
  border-radius: 10px;
}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>üöõ –ö–∞—Ç–µ–≥–æ—Ä–∏—è –° - Smart Learning 2.0</h1>
    <p>–ò–Ω—Ç–µ–ª–∏–≥–µ–Ω—Ç–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Å AI –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –∏ –º–Ω–µ–º–æ—Ç–µ—Ö–Ω–∏–∫–∏</p>
  </div>

  <div class="tabs">
    <button class="tab active" onclick="showTab('quiz')">üìù Quiz —Ä–µ–∂–∏–º</button>
    <button class="tab" onclick="showTab('cheat')">üìä Cheat Sheets</button>
    <button class="tab" onclick="showTab('stats')">üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
  </div>

  <!-- QUIZ TAB -->
  <div id="quiz-tab" class="tab-content active">
    <div class="stats">
      <div class="stat-card">
        <h3>–û–±—â–æ –≤—ä–ø—Ä–æ—Å–∏</h3>
        <div class="number" id="totalQuestions">0</div>
      </div>
      <div class="stat-card">
        <h3>–ù–∞—É—á–µ–Ω–∏</h3>
        <div class="number" id="learnedCount">0</div>
      </div>
      <div class="stat-card">
        <h3>–ü—Ä–æ–≥—Ä–µ—Å</h3>
        <div class="number" id="currentProgress">0%</div>
      </div>
      <div class="stat-card">
        <h3>–¢–æ—á–Ω–æ—Å—Ç</h3>
        <div class="number" id="accuracy">0%</div>
      </div>
    </div>

    <div class="filters">
      <button class="filter-btn active" data-filter="all">–í—Å–∏—á–∫–∏</button>
      <button class="filter-btn" data-filter="LOGIC">üí° –õ–æ–≥–∏—á–µ—Å–∫–∏</button>
      <button class="filter-btn" data-filter="NUMBERS">üî¢ –¶–∏—Ñ—Ä–∏</button>
      <button class="filter-btn" data-filter="RULES">üìã –ü—Ä–∞–≤–∏–ª–∞</button>
      <button class="filter-btn" data-filter="SIGNS">üö¶ –ó–Ω–∞—Ü–∏</button>
      <button class="filter-btn" data-filter="DOCUMENTS">üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∏</button>
    </div>

    <div class="progress-bar">
      <div class="progress-fill" id="progressFill" style="width: 0%"></div>
    </div>

    <div id="quizContainer"></div>

    <div class="navigation">
      <button class="nav-btn" id="prevBtn" onclick="prevQuestion()">‚¨Ö –ü—Ä–µ–¥–∏—à–µ–Ω</button>
      <button class="nav-btn" id="nextBtn" onclick="nextQuestion()">–°–ª–µ–¥–≤–∞—â ‚û°</button>
    </div>
  </div>

  <!-- CHEAT SHEETS TAB -->
  <div id="cheat-tab" class="tab-content">
    <div class="cheat-sheet">
      <h2>üî¢ –†–∞–±–æ—Ç–Ω–æ –≤—Ä–µ–º–µ –∏ –ø–æ—á–∏–≤–∫–∏ - –ö–õ–Æ–ß–û–í–ò –¶–ò–§–†–ò</h2>
      
      <h3 style="color: #f59e0b; margin-top: 20px;">–î–Ω–µ–≤–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h3>
      <table class="cheat-table">
        <tr>
          <th>–ü–∞—Ä–∞–º–µ—Ç—ä—Ä</th>
          <th>–°—Ç–æ–π–Ω–æ—Å—Ç</th>
          <th>üí° –ú–Ω–µ–º–æ–Ω–∏–∫–∞</th>
        </tr>
        <tr>
          <td>–ú–∞–∫—Å–∏–º–∞–ª–Ω–æ –¥–Ω–µ–≤–Ω–æ –≤—Ä–µ–º–µ</td>
          <td><strong>9 —á–∞—Å–∞</strong></td>
          <td>9 to 5 —Ä–∞–±–æ—Ç–µ–Ω –¥–µ–Ω</td>
        </tr>
        <tr>
          <td>–£–¥—ä–ª–∂–µ–Ω–∏–µ –¥–æ 10 —á–∞—Å–∞</td>
          <td><strong>2 –ø—ä—Ç–∏/—Å–µ–¥–º–∏—Ü–∞</strong></td>
          <td>–î–í–ê = –î–í–ï —Ä—ä—Ü–µ</td>
        </tr>
        <tr>
          <td>–ü—Ä–µ–∫—ä—Å–≤–∞–Ω–µ —Å–ª–µ–¥</td>
          <td><strong>4.5 —á–∞—Å–∞</strong></td>
          <td>–í—Ä–µ–º–µ –∑–∞ –ö–ê–§–ï!</td>
        </tr>
        <tr>
          <td>–ú–∏–Ω–∏–º–∞–ª–Ω–æ –ø—Ä–µ–∫—ä—Å–≤–∞–Ω–µ</td>
          <td><strong>45 –º–∏–Ω—É—Ç–∏</strong></td>
          <td>4.5 ‚Üí 45 (–ø—Ä–µ–º–∞—Ö–Ω–∏ —Ç–æ—á–∫–∞—Ç–∞!)</td>
        </tr>
      </table>

      <h3 style="color: #f59e0b; margin-top: 30px;">–°–µ–¥–º–∏—á–Ω–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h3>
      <table class="cheat-table">
        <tr>
          <th>–ü–µ—Ä–∏–æ–¥</th>
          <th>–ú–∞–∫—Å–∏–º—É–º</th>
          <th>üí° –§–æ—Ä–º—É–ª–∞</th>
        </tr>
        <tr>
          <td>1 —Å–µ–¥–º–∏—Ü–∞</td>
          <td><strong>56 —á–∞—Å–∞</strong></td>
          <td>7 –¥–Ω–∏ √ó 8 —á–∞—Å–∞ = 56</td>
        </tr>
        <tr>
          <td>2 —Å–µ–¥–º–∏—Ü–∏</td>
          <td><strong>90 —á–∞—Å–∞</strong></td>
          <td>90¬∞ = –ø—Ä–∞–≤–æ —ä–≥—ä–ª</td>
        </tr>
      </table>

      <h3 style="color: #f59e0b; margin-top: 30px;">–ü–æ—á–∏–≤–∫–∏</h3>
      <table class="cheat-table">
        <tr>
          <th>–¢–∏–ø –ø–æ—á–∏–≤–∫–∞</th>
          <th>–ù–æ—Ä–º–∞–ª–Ω–∞</th>
          <th>–ù–∞–º–∞–ª–µ–Ω–∞</th>
          <th>–ü—ä—Ç–∏ —Å–µ–¥–º–∏—á–Ω–æ</th>
        </tr>
        <tr>
          <td>–î–Ω–µ–≤–Ω–∞</td>
          <td><strong>11 —á–∞—Å–∞</strong></td>
          <td><strong>9 —á–∞—Å–∞</strong></td>
          <td>3 –ø—ä—Ç–∏ (–¢–†–ò—ä–≥—ä–ª–Ω–∏–∫)</td>
        </tr>
        <tr>
          <td>–°–µ–¥–º–∏—á–Ω–∞</td>
          <td><strong>45 —á–∞—Å–∞</strong></td>
          <td><strong>24 —á–∞—Å–∞</strong></td>
          <td>-</td>
        </tr>
      </table>
    </div>

    <div class="cheat-sheet">
      <h2>üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∏ –∏ —Å—Ä–æ–∫–æ–≤–µ</h2>
      <table class="cheat-table">
        <tr>
          <th>–î–æ–∫—É–º–µ–Ω—Ç</th>
          <th>–í–∞–ª–∏–¥–Ω–æ—Å—Ç</th>
        </tr>
        <tr>
          <td>–õ–∏—Ü–µ–Ω–∑ –∑–∞ –ø—Ä–µ–≤–æ–∑</td>
          <td><strong>10 –≥–æ–¥–∏–Ω–∏</strong></td>
        </tr>
        <tr>
          <td>–ö–∞—Ä—Ç–∞ –∑–∞ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è</td>
          <td><strong>5 –≥–æ–¥–∏–Ω–∏</strong></td>
        </tr>
        <tr>
          <td>–ö–∞—Ä—Ç–∞ –∑–∞ —Ç–∞—Ö–æ–≥—Ä–∞—Ñ</td>
          <td><strong>5 –≥–æ–¥–∏–Ω–∏</strong></td>
        </tr>
        <tr>
          <td>–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞ –≥–æ–¥–Ω–æ—Å—Ç</td>
          <td><strong>3 –≥–æ–¥–∏–Ω–∏</strong></td>
        </tr>
      </table>
    </div>

    <div class="cheat-sheet">
      <h2>üöó –¢–æ–≤–∞—Ä –∏ –≥–∞–±–∞—Ä–∏—Ç–∏</h2>
      <table class="cheat-table">
        <tr>
          <th>–ü–æ–∑–∏—Ü–∏—è</th>
          <th>–ë–µ–∑ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ</th>
          <th>–° –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ</th>
        </tr>
        <tr>
          <td>–û—Ç–ø—Ä–µ–¥</td>
          <td>–¥–æ 1 –º</td>
          <td>–Ω–∞–¥ 1 –º</td>
        </tr>
        <tr>
          <td>–û—Ç–∑–∞–¥</td>
          <td>–¥–æ 1 –º</td>
          <td>–Ω–∞–¥ 1 –º</td>
        </tr>
        <tr>
          <td>–û—Ç—Å—Ç—Ä–∞–Ω–∏</td>
          <td>–¥–æ 0.2 –º</td>
          <td>–Ω–∞–¥ 0.2 –º</td>
        </tr>
      </table>
      <div class="mnemonic-box">
        üí° 1 –º–µ—Ç—ä—Ä –Ω–∞–ø—Ä–µ–¥/–Ω–∞–∑–∞–¥ = –µ–¥–Ω–∞ —Å—Ç—ä–ø–∫–∞ | 0.2 –º –≤—Å—Ç—Ä–∞–Ω–∏ = –¥–ª–∞–Ω
      </div>
    </div>
  </div>

  <!-- STATS TAB -->
  <div id="stats-tab" class="tab-content">
    <div class="cheat-sheet">
      <h2>üìà –¢–≤–æ—è—Ç–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h2>
      <div id="statsContent"></div>
    </div>
  </div>
</div>

<script>
// DATABASE - —Å–µ–≥–∞ —Å –í–°–ò–ß–ö–ò –∫–ª—é—á–æ–≤–∏ –≤—ä–ø—Ä–æ—Å–∏
const QUESTIONS = [
  // –¢–ï–ú–ê 1: –¢–∞—Ö–æ–≥—Ä–∞—Ñ–∏ –∏ —Ä–∞–±–æ—Ç–Ω–æ –≤—Ä–µ–º–µ (–∫–ª—é—á–æ–≤–∏)
  {id:1,topic:"–¢–µ–º–∞ 1: –¢–∞—Ö–æ–≥—Ä–∞—Ñ–∏",type:"NUMBERS",text:"–î–Ω–µ–≤–Ω–æ—Ç–æ –≤—Ä–µ–º–µ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –Ω–∞–¥–≤–∏—à–∞–≤–∞:",answers:["8 —á–∞—Å–∞","9 —á–∞—Å–∞","10 —á–∞—Å–∞"],correct:1,mnemonic:"üí° 9 —á–∞—Å–∞ = 9 to 5 —Ä–∞–±–æ—Ç–µ–Ω –¥–µ–Ω",relatedNumbers:["–ú–æ–∂–µ –¥–æ 10 —á–∞—Å–∞, 2 –ø—ä—Ç–∏ —Å–µ–¥–º–∏—á–Ω–æ"]},
  {id:2,topic:"–¢–µ–º–∞ 1: –¢–∞—Ö–æ–≥—Ä–∞—Ñ–∏",type:"NUMBERS",text:"–î–Ω–µ–≤–Ω–æ—Ç–æ –≤—Ä–µ–º–µ –º–æ–∂–µ –¥–∞ —Å–µ –ø—Ä–æ–¥—ä–ª–∂–∏ –¥–æ 10 —á–∞—Å–∞:",answers:["–µ–¥–∏–Ω –ø—ä—Ç —Å–µ–¥–º–∏—á–Ω–æ","–¥–≤–∞ –ø—ä—Ç–∏ —Å–µ–¥–º–∏—á–Ω–æ","—Ç—Ä–∏ –ø—ä—Ç–∏ —Å–µ–¥–º–∏—á–Ω–æ"],correct:1,mnemonic:"üí° –î–í–ê = –î–í–ï —Ä—ä—Ü–µ",relatedNumbers:[]},
  {id:3,topic:"–¢–µ–º–∞ 1: –¢–∞—Ö–æ–≥—Ä–∞—Ñ–∏",type:"NUMBERS",text:"–°–µ–¥–º–∏—á–Ω–æ—Ç–æ –≤—Ä–µ–º–µ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –ø—Ä–µ–≤–∏—à–∞–≤–∞:",answers:["48 —á–∞—Å–∞","52 —á–∞—Å–∞","56 —á–∞—Å–∞","60 —á–∞—Å–∞"],correct:2,mnemonic:"üí° 7 –¥–Ω–∏ √ó 8 = 56",relatedNumbers:["–ó–∞ 2 —Å–µ–¥–º–∏—Ü–∏: 90 —á–∞—Å–∞"]},
  {id:4,topic:"–¢–µ–º–∞ 1: –¢–∞—Ö–æ–≥—Ä–∞—Ñ–∏",type:"NUMBERS",text:"–í—Ä–µ–º–µ—Ç–æ –∑–∞ –¥–≤–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª–Ω–∏ —Å–µ–¥–º–∏—Ü–∏ –Ω–µ —Ç—Ä—è–±–≤–∞ –¥–∞ –Ω–∞–¥–≤–∏—à–∞–≤–∞:",answers:["80 —á–∞—Å–∞","90 —á–∞—Å–∞","100 —á–∞—Å–∞","110 —á–∞—Å–∞"],correct:1,mnemonic:"üí° 90¬∞ = –ø—Ä–∞–≤–æ —ä–≥—ä–ª",relatedNumbers:[]},
  {id:5,topic:"–¢–µ–º–∞ 1: –¢–∞—Ö–æ–≥—Ä–∞—Ñ–∏",type:"NUMBERS",text:"–°–ª–µ–¥ –∫–æ–ª–∫–æ —á–∞—Å–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä—è–±–≤–∞ –ø—Ä–µ–∫—ä—Å–≤–∞–Ω–µ?",answers:["4.5 —á–∞—Å–∞","5 —á–∞—Å–∞","5.5 —á–∞—Å–∞","6 —á–∞—Å–∞"],correct:0,mnemonic:"üí° 4.5 = –≤—Ä–µ–º–µ –∑–∞ –ö–ê–§–ï!",relatedNumbers:["–ü—Ä–µ–∫—ä—Å–≤–∞–Ω–µ: 45 –º–∏–Ω"]},
  {id:6,topic:"–¢–µ–º–∞ 1: –¢–∞—Ö–æ–≥—Ä–∞—Ñ–∏",type:"NUMBERS",text:"–ú–∏–Ω–∏–º–∞–ª–Ω–æ –ø—Ä–µ–∫—ä—Å–≤–∞–Ω–µ —Å–ª–µ–¥ 4.5 —á–∞—Å–∞:",answers:["15 –º–∏–Ω—É—Ç–∏","20 –º–∏–Ω—É—Ç–∏","30 –º–∏–Ω—É—Ç–∏","45 –º–∏–Ω—É—Ç–∏"],correct:3,mnemonic:"üí° 4.5 ‚Üí 45 (–ø—Ä–µ–º–∞—Ö–Ω–∏ —Ç–æ—á–∫–∞—Ç–∞!)",relatedNumbers:["–ò–ª–∏ 15+30 –º–∏–Ω"]},
  {id:7,topic:"–¢–µ–º–∞ 1: –¢–∞—Ö–æ–≥—Ä–∞—Ñ–∏",type:"NUMBERS",text:"–ù–æ—Ä–º–∞–ª–Ω–∞ –¥–Ω–µ–≤–Ω–∞ –ø–æ—á–∏–≤–∫–∞ –Ω–µ –ø–æ-–º–∞–ª–∫–æ –æ—Ç:",answers:["9 —á–∞—Å–∞","10 —á–∞—Å–∞","11 —á–∞—Å–∞","12 —á–∞—Å–∞"],correct:2,mnemonic:"üí° 11 = –ø–æ–ª–æ–≤–∏–Ω –¥–µ–Ω —Å—ä–Ω",relatedNumbers:[]},
  {id:8,topic:"–¢–µ–º–∞ 1: –¢–∞—Ö–æ–≥—Ä–∞—Ñ–∏",type:"NUMBERS",text:"–ú–æ–∂–µ –ª–∏ –¥–∞ —Å–µ –Ω–∞–º–∞–ª–∏ –¥–Ω–µ–≤–Ω–∞—Ç–∞ –ø–æ—á–∏–≤–∫–∞?",answers:["–¥–æ 7 —á–∞—Å–∞","–¥–æ 8 —á–∞—Å–∞","–¥–æ 9 —á–∞—Å–∞","–¥–æ 10 —á–∞—Å–∞"],correct:2,mnemonic:"üí° 9 to 5 = 9 —á–∞—Å–∞ –º–∏–Ω–∏–º—É–º",relatedNumbers:[]},
  {id:9,topic:"–¢–µ–º–∞ 1: –¢–∞—Ö–æ–≥—Ä–∞—Ñ–∏",type:"NUMBERS",text:"–ù–∞–º–∞–ª–µ–Ω–∞ –ø–æ—á–∏–≤–∫–∞ (–¥–æ 9 —á–∞—Å–∞) –Ω–∞–π-–º–Ω–æ–≥–æ:",answers:["1 –ø—ä—Ç —Å–µ–¥–º–∏—á–Ω–æ","2 –ø—ä—Ç–∏ —Å–µ–¥–º–∏—á–Ω–æ","3 –ø—ä—Ç–∏ —Å–µ–¥–º–∏—á–Ω–æ","4 –ø—ä—Ç–∏ —Å–µ–¥–º–∏—á–Ω–æ"],correct:2,mnemonic:"üí° –¢–†–ò = –¢–†–ò—ä–≥—ä–ª–Ω–∏–∫",relatedNumbers:[]},
  {id:10,topic:"–¢–µ–º–∞ 1: –¢–∞—Ö–æ–≥—Ä–∞—Ñ–∏",type:"NUMBERS",text:"–ù–æ—Ä–º–∞–ª–Ω–∞ —Å–µ–¥–º–∏—á–Ω–∞ –ø–æ—á–∏–≤–∫–∞ –Ω–µ –ø–æ-–º–∞–ª–∫–æ –æ—Ç:",answers:["48 —á–∞—Å–∞","45 —á–∞—Å–∞","42 —á–∞—Å–∞","36 —á–∞—Å–∞"],correct:1,mnemonic:"üí° 45 = –ø–µ—Ç—ä–∫ –≤–µ—á–µ—Ä –¥–æ –Ω–µ–¥–µ–ª—è",relatedNumbers:[]},
  
  // –¢–ï–ú–ê 6: –ü–¢–ü
  {id:11,topic:"–¢–µ–º–∞ 6: –ü–¢–ü",type:"LOGIC",text:"–ù–∞–π-—á–µ—Å—Ç–∞ –ø—Ä–∏—á–∏–Ω–∞ –∑–∞ –ü–¢–ü:",answers:["–≥—Ä–µ—à–∫–∞ –Ω–∞ –≤–æ–¥–∞—á–∞","–ª–æ—à–∏ –ø—ä—Ç–∏—â–∞","–Ω–µ–∏–∑–ø—Ä–∞–≤–Ω–æ—Å—Ç","–ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –ø–µ—à–µ—Ö–æ–¥—Ü–∏"],correct:0,mnemonic:"üí° –í–∏–Ω–∞–≥–∏ –≤–∏–Ω–æ–≤–µ–Ω –µ –®–û–§–¨–û–†–™–¢!",relatedNumbers:[]},
  {id:12,topic:"–¢–µ–º–∞ 6: –ü–¢–ü",type:"LOGIC",text:"–ü—Ä–∏ –ü–¢–ü –≤–æ–¥–∞—á—ä—Ç —Ç—Ä—è–±–≤–∞ –¥–∞ —Å–ø—Ä–µ:",answers:["–±–µ–∑ –æ–ø–∞—Å–Ω–æ—Å—Ç –∑–∞ –¥–≤–∏–∂–µ–Ω–∏–µ—Ç–æ","–¥–æ –∫—Ä–∞—è –Ω–∞ –ø–ª–∞—Ç–Ω–æ—Ç–æ","–Ω–∞ –ø–∞—Ä–∫–∏–Ω–≥"],correct:0,mnemonic:"üí° –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç first!",relatedNumbers:[]},
  {id:13,topic:"–¢–µ–º–∞ 6: –ü–¢–ü",type:"NUMBERS",text:"–°–ø–µ—à–µ–Ω –Ω–æ–º–µ—Ä 112 –µ:",answers:["–µ–≤—Ä–æ–ø–µ–π—Å–∫–∏ —Å–ø–µ—à–µ–Ω –Ω–æ–º–µ—Ä","–ø—ä—Ç–Ω–∞ –ø–æ–º–æ—â"],correct:0,mnemonic:"üí° 112 = 1 –∑–∞ –≤—Å–∏—á–∫–∏ + 12 –º–µ—Å–µ—Ü–∞",relatedNumbers:[]},
  {id:14,topic:"–¢–µ–º–∞ 6: –ü–¢–ü",type:"RULES",text:"–û—Å–∏–≥—É—Ä—è–≤–∞–Ω–µ –ø—Ä–∏ —Å–º—è–Ω–∞ –Ω–∞ –∫–æ–ª–µ–ª–æ:",answers:["–ø—Ä–µ–¥–∞–≤–∫–∞","—Å–ø–∏—Ä–∞—á–∫–∞","–∫–ª–∏–Ω–æ–≤–µ","–Ω–∞ –Ω–∞–∫–ª–æ–Ω"],correct:0,mnemonic:"üí° –¢–†–ò –º–µ—Ä–∫–∏ (–ø—ä—Ä–≤–∏—Ç–µ 3)",relatedNumbers:[]},
  
  // –¢–ï–ú–ê 2: –î–æ–∫—É–º–µ–Ω—Ç–∏
  {id:15,topic:"–¢–µ–º–∞ 2: –î–æ–∫—É–º–µ–Ω—Ç–∏",type:"DOCUMENTS",text:"–õ–∏—Ü–µ–Ω–∑ –∑–∞ –ø—Ä–µ–≤–æ–∑ - –≤–∞–ª–∏–¥–Ω–æ—Å—Ç:",answers:["1 –≥–æ–¥","5 –≥–æ–¥","10 –≥–æ–¥"],correct:2,mnemonic:"üí° 10 = –î–ï–°–ï–¢–∏–ª–µ—Ç–∏–µ",relatedNumbers:[]},
  {id:16,topic:"–¢–µ–º–∞ 2: –î–æ–∫—É–º–µ–Ω—Ç–∏",type:"DOCUMENTS",text:"–ö–∞—Ä—Ç–∞ –∑–∞ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏—è - –≤–∞–ª–∏–¥–Ω–æ—Å—Ç:",answers:["1 –≥–æ–¥","3 –≥–æ–¥","5 –≥–æ–¥"],correct:2,mnemonic:"üí° 5 = –ø–µ—Ç–∏–ª–µ—Ç–∫–∞",relatedNumbers:[]},
  {id:17,topic:"–¢–µ–º–∞ 2: –î–æ–∫—É–º–µ–Ω—Ç–∏",type:"DOCUMENTS",text:"–ü—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∞ –≥–æ–¥–Ω–æ—Å—Ç - –≤–∞–ª–∏–¥–Ω–æ—Å—Ç:",answers:["1 –≥–æ–¥","2 –≥–æ–¥","3 –≥–æ–¥"],correct:2,mnemonic:"üí° 3 = –¢–†–ò–≥–æ–¥–∏—à–µ–Ω —Ü–∏–∫—ä–ª",relatedNumbers:[]},
  
  // –¢–ï–ú–ê 3: –¢–æ–≤–∞—Ä
  {id:18,topic:"–¢–µ–º–∞ 3: –¢–æ–≤–∞—Ä",type:"NUMBERS",text:"–¢–æ–≤–∞—Ä –æ—Ç–ø—Ä–µ–¥ - –±–µ–∑ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ:",answers:["1 –º","1.5 –º","2 –º"],correct:0,mnemonic:"üí° 1 –º–µ—Ç—ä—Ä = –µ–¥–Ω–∞ —Å—Ç—ä–ø–∫–∞",relatedNumbers:["–û—Ç–∑–∞–¥ —Å—ä—â–æ 1–º"]},
  {id:19,topic:"–¢–µ–º–∞ 3: –¢–æ–≤–∞—Ä",type:"NUMBERS",text:"–¢–æ–≤–∞—Ä –æ—Ç—Å—Ç—Ä–∞–Ω–∏ - –±–µ–∑ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ –¥–æ:",answers:["0.2 –º","0.5 –º","0.75 –º","1 –º"],correct:0,mnemonic:"üí° 0.2–º = –¥–ª–∞–Ω –≤—Å—Ç—Ä–∞–Ω–∏",relatedNumbers:[]},
  {id:20,topic:"–¢–µ–º–∞ 3: –¢–æ–≤–∞—Ä",type:"LOGIC",text:"–ó–∞–¥—ä–ª–∂–µ–Ω–∏–µ –∑–∞ –º–∞—Å–∞ –Ω–∞ —Ç–æ–≤–∞—Ä–∞:",answers:["–Ω–∞ —Ç–æ–≤–∞—Ä–æ–¥–∞—Ç–µ–ª—è","–Ω–∞ –≤–æ–¥–∞—á–∞","–Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–∏–∫–∞"],correct:0,mnemonic:"üí° –¢–æ–≤–∞—Ä–æ–¥–∞—Ç–µ–ª ‚Üí –æ—Ç–≥–æ–≤–∞—Ä—è –∑–∞ –¢–û–í–ê–†",relatedNumbers:[]},
];

// STATE - –ü–û–ü–†–ê–í–ö–ê –ù–ê –ì–†–ï–®–ö–ê–¢–ê
let state = {
  currentQuestion: 0,
  filter: 'all',
  answered: new Set(),
  correct: new Set(),
  wrongAnswers: new Map() // Map –≤–º–µ—Å—Ç–æ Set!
};

// TABS
function showTab(tab) {
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  
  event.target.classList.add('active');
  document.getElementById(tab + '-tab').classList.add('active');
  
  if (tab === 'stats') updateStatsTab();
}

// INITIALIZE
function init() {
  updateStats();
  renderQuestion();
  setupFilters();
  // Load saved progress
  loadProgress();
}

function loadProgress() {
  const saved = localStorage.getItem('categoryC_progress');
  if (saved) {
    const data = JSON.parse(saved);
    state.answered = new Set(data.answered);
    state.correct = new Set(data.correct);
    state.wrongAnswers = new Map(data.wrongAnswers);
  }
}

function saveProgress() {
  localStorage.setItem('categoryC_progress', JSON.stringify({
    answered: Array.from(state.answered),
    correct: Array.from(state.correct),
    wrongAnswers: Array.from(state.wrongAnswers)
  }));
}

function updateStats() {
  const filtered = getFilteredQuestions();
  document.getElementById('totalQuestions').textContent = filtered.length;
  document.getElementById('learnedCount').textContent = state.answered.size;
  
  const progress = filtered.length > 0 ? Math.round((state.currentQuestion / filtered.length) * 100) : 0;
  document.getElementById('currentProgress').textContent = progress + '%';
  document.getElementById('progressFill').style.width = progress + '%';
  
  const accuracy = state.answered.size > 0 ? Math.round((state.correct.size / state.answered.size) * 100) : 0;
  document.getElementById('accuracy').textContent = accuracy + '%';
}

function getFilteredQuestions() {
  if (state.filter === 'all') return QUESTIONS;
  return QUESTIONS.filter(q => q.type === state.filter);
}

function renderQuestion() {
  const filtered = getFilteredQuestions();
  if (filtered.length === 0) {
    document.getElementById('quizContainer').innerHTML = '<p>–ù—è–º–∞ –≤—ä–ø—Ä–æ—Å–∏ –∑–∞ —Ç–æ–∑–∏ —Ñ–∏–ª—Ç—ä—Ä</p>';
    return;
  }
  
  const q = filtered[state.currentQuestion];
  const isAnswered = state.answered.has(q.id);
  
  let html = `
    <div class="question-card">
      <div class="topic-header">${q.topic}</div>
      <div class="question-header">
        <span class="question-type type-${q.type}">${getTypeLabel(q.type)}</span>
        <span>–í—ä–ø—Ä–æ—Å ${state.currentQuestion + 1} –æ—Ç ${filtered.length}</span>
      </div>
      <div class="question-text">${q.text}</div>
      <div class="answers">
  `;
  
  q.answers.forEach((answer, idx) => {
    const isCorrect = idx === q.correct;
    let className = 'answer-btn';
    
    if (isAnswered) {
      if (isCorrect) className += ' correct';
      else if (state.wrongAnswers.has(q.id) && state.wrongAnswers.get(q.id) === idx) className += ' wrong';
    }
    
    html += `<button class="${className}" onclick="checkAnswer(${q.id}, ${idx}, ${isCorrect})" ${isAnswered ? 'disabled' : ''}>${answer}</button>`;
  });
  
  html += `</div>`;
  
  if (isAnswered) {
    html += `
      <div class="mnemonic show">
        <div class="mnemonic-title">üí° –ö–∞–∫ –¥–∞ –∑–∞–ø–æ–º–Ω–∏—à:</div>
        <div>${q.mnemonic}</div>
        ${q.relatedNumbers && q.relatedNumbers.length > 0 ? '<div style="margin-top:15px"><strong>–°–≤—ä—Ä–∑–∞–Ω–∏:</strong><br>' + q.relatedNumbers.join('<br>') + '</div>' : ''}
      </div>
    `;
  }
  
  html += `</div>`;
  
  document.getElementById('quizContainer').innerHTML = html;
  
  document.getElementById('prevBtn').disabled = state.currentQuestion === 0;
  document.getElementById('nextBtn').disabled = state.currentQuestion >= filtered.length - 1;
  
  updateStats();
}

function getTypeLabel(type) {
  const labels = {
    'LOGIC': 'üí° –õ–æ–≥–∏—á–µ—Å–∫–∏',
    'NUMBERS': 'üî¢ –¶–∏—Ñ—Ä–∏',
    'RULES': 'üìã –ü—Ä–∞–≤–∏–ª–∞',
    'SIGNS': 'üö¶ –ó–Ω–∞—Ü–∏',
    'DOCUMENTS': 'üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∏'
  };
  return labels[type] || type;
}

function checkAnswer(questionId, answerIdx, isCorrect) {
  state.answered.add(questionId);
  
  if (isCorrect) {
    state.correct.add(questionId);
  } else {
    state.wrongAnswers.set(questionId, answerIdx);
  }
  
  saveProgress();
  renderQuestion();
}

function nextQuestion() {
  const filtered = getFilteredQuestions();
  if (state.currentQuestion < filtered.length - 1) {
    state.currentQuestion++;
    renderQuestion();
  }
}

function prevQuestion() {
  if (state.currentQuestion > 0) {
    state.currentQuestion--;
    renderQuestion();
  }
}

function setupFilters() {
  document.querySelectorAll('.filter-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      
      state.filter = btn.dataset.filter;
      state.currentQuestion = 0;
      renderQuestion();
    });
  });
}

function updateStatsTab() {
  const byType = {};
  QUESTIONS.forEach(q => {
    if (!byType[q.type]) byType[q.type] = {total: 0, correct: 0, wrong: 0};
    byType[q.type].total++;
    if (state.correct.has(q.id)) byType[q.type].correct++;
    if (state.wrongAnswers.has(q.id)) byType[q.type].wrong++;
  });
  
  let html = '<table class="cheat-table"><tr><th>–¢–∏–ø</th><th>–û–±—â–æ</th><th>–í–µ—Ä–Ω–∏</th><th>–ì—Ä–µ—à–Ω–∏</th><th>–¢–æ—á–Ω–æ—Å—Ç</th></tr>';
  Object.keys(byType).forEach(type => {
    const data = byType[type];
    const accuracy = data.correct + data.wrong > 0 ? Math.round((data.correct / (data.correct + data.wrong)) * 100) : 0;
    html += `<tr><td>${getTypeLabel(type)}</td><td>${data.total}</td><td>${data.correct}</td><td>${data.wrong}</td><td>${accuracy}%</td></tr>`;
  });
  html += '</table>';
  
  document.getElementById('statsContent').innerHTML = html;
}

// START
init();
</script>
</body>
</html>
